<% if current_user.organisation %>
  <h1 class="mt-5 mb-4 text-center"> <%= current_user.organisation.name.capitalize %> shifts </h1>
<% end %>


<div class="shifts-back">
  <br>
  <p><i class="fa-solid fa-arrow-left"></i><%= link_to "Back to Organisation", root_path %></p>
</div>

<table class="mt-5 mb-5">

  <tr>
    <th>Employee name</th>
    <th>Shift date</th>
    <th>Start time</th>
    <th>Finish time</th>
    <th>Break length (minutes)</th>
    <th>Hours worked</th>
    <th>Shift cost</th>
  </tr>

  <% @shifts.each do |shift| %>

    <% if shift.prior_shift == false %>
      <tr>
        <td><%= shift.user.name %></td>
        <td><%= shift.start.strftime("%d/%m/%Y") %></td>
        <td><%= shift.start.strftime("%I:%M%P") %></td>
        <td><%= shift.finish.strftime("%I:%M%P") %></td>
        <td><%= shift.break_length %></td>
        <td><%= shift.hours_worked.round(1) %></td>
        <td><%= shift.shift_cost.round(1) %></td>
        <% if shift.user == current_user %>
          <td>
            <%= render partial: "shared/edit_shift", locals: {shift: shift}%>
          </td>
          <td>
            <%= link_to "Delete",
              shift_path(shift),
              data: {turbo_method: :delete, turbo_confirm: "Are you sure?"},
              class: "btn-purple-sm px-3 py-2"
            %>
          </td>
        <% end %>
      </tr>
    <% end %>
  <% end %>

  <tr>
    <%= render partial: "shared/shift_form" %>
  </tr>

</table>

<div class="shifts-back">
  <br>
  <p><i class="fa-solid fa-arrow-left"></i><%= link_to "View your prior shifts", view_prior_path %></p>
</div>
